"use client";import {useEffect,useState,FormEvent} from 'react';import {supabase} from '@/lib/supabaseClient';export default function Reset(){const[ready,setReady]=useState(false);const[pw,setPw]=useState('');const[msg,setMsg]=useState<string|null>(null);useEffect(()=>{if(typeof window!=='undefined'&&window.location.hash){supabase.auth.exchangeCodeForSession(window.location.hash).finally(()=>setReady(true));}else setReady(true);},[]);const on=async(e:FormEvent)=>{e.preventDefault();const {error}=await supabase.auth.updateUser({password:pw});setMsg(error?error.message:'Password updated.');};if(!ready)return <div className='loader-orb'/>;return(<div className='max-w-sm mx-auto card'><h2 className='font-semibold mb-2'>Set new password</h2><form onSubmit={on} className='grid gap-2'><input className='input' type='password' value={pw} onChange={e=>setPw(e.target.value)} placeholder='New password' required/><button className='btn'>Update</button></form>{msg&&<div className='text-white/70 mt-2'>{msg}</div>}</div>);}
