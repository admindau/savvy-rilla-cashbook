"use client";import {FormEvent,useState} from 'react';import {supabase} from '@/lib/supabaseClient';export default function Auth(){const[mode,setMode]=useState<'login'|'signup'|'forgot'>('login');const[email,setEmail]=useState('');const[password,setPassword]=useState('');const[msg,setMsg]=useState<string|null>(null);const onLogin=async(e:FormEvent)=>{e.preventDefault();const {error}=await supabase.auth.signInWithPassword({email,password});setMsg(error?error.message:'Logged in!');};const onSignup=async(e:FormEvent)=>{e.preventDefault();const {error}=await supabase.auth.signUp({email,password});setMsg(error?error.message:'Check email to confirm.');};const onForgot=async(e:FormEvent)=>{e.preventDefault();const {error}=await supabase.auth.resetPasswordForEmail(email,{redirectTo:window.location.origin+'/auth/reset'});setMsg(error?error.message:'Reset link sent.');};return(<div className='grid gap-4 max-w-md mx-auto'><div className='card'><div className='flex gap-2 mb-3'><button className='btn' onClick={()=>setMode('login')}>Login</button><button className='btn' onClick={()=>setMode('signup')}>Sign up</button><button className='btn' onClick={()=>setMode('forgot')}>Forgot</button></div><form onSubmit={mode==='login'?onLogin:mode==='signup'?onSignup:onForgot} className='grid gap-2'><input className='input' placeholder='Email' value={email} onChange={e=>setEmail(e.target.value)} required/><input className='input' placeholder='Password' type='password' value={password} onChange={e=>setPassword(e.target.value)} required={mode!=='forgot'}/><button className='btn'>{mode==='login'?'Login':mode==='signup'?'Create account':'Send reset'}</button></form>{msg&&<div className='text-white/70 mt-2'>{msg}</div>}</div></div>);}
