"use client";import {useState,FormEvent} from 'react';import {supabase} from '@/lib/supabaseClient';export default function A(){const[m,setM]=useState<'login'|'signup'|'forgot'>('login');const[e,se]=useState('');const[p,sp]=useState('');const[msg,setMsg]=useState<string|null>(null);const L=async(x:FormEvent)=>{x.preventDefault();setMsg(null);const {error}=await supabase.auth.signInWithPassword({email:e,password:p});if(error)setMsg(error.message);else location.href='/app'};const S=async(x:FormEvent)=>{x.preventDefault();setMsg(null);const {error}=await supabase.auth.signUp({email:e,password:p,options:{emailRedirectTo:location.origin+'/auth/reset'}});if(error)setMsg(error.message);else setMsg('Check your email to confirm, then log in.')};const F=async(x:FormEvent)=>{x.preventDefault();setMsg(null);const {error}=await supabase.auth.resetPasswordForEmail(e,{redirectTo:location.origin+'/auth/reset'});if(error)setMsg(error.message);else setMsg('If the email exists, a reset link has been sent.')} ;return <div className='p-8'><h1 className='text-xl font-semibold mb-4'>Auth</h1>{msg&&<p className='mb-3'>{msg}</p>}{m==='login'&&<form onSubmit={L} className='space-y-2'><input className='border p-2 w-full text-black' placeholder='Email' type='email' value={e} onChange={ev=>se(ev.target.value)} required/><input className='border p-2 w-full text-black' placeholder='Password' type='password' value={p} onChange={ev=>sp(ev.target.value)} required/><button className='border px-3 py-2'>Log in</button><div className='space-x-3 ml-2'><button type='button' onClick={()=>setM('signup')}>Create account</button><button type='button' onClick={()=>setM('forgot')}>Forgot?</button></div></form>}{m==='signup'&&<form onSubmit={S} className='space-y-2'><input className='border p-2 w-full text-black' placeholder='Email' type='email' value={e} onChange={ev=>se(ev.target.value)} required/><input className='border p-2 w-full text-black' placeholder='Password' type='password' value={p} onChange={ev=>sp(ev.target.value)} required/><button className='border px-3 py-2'>Sign up</button><div className='ml-2'><button type='button' onClick={()=>setM('login')}>Back</button></div></form>}{m==='forgot'&&<form onSubmit={F} className='space-y-2'><input className='border p-2 w-full text-black' placeholder='Email' type='email' value={e} onChange={ev=>se(ev.target.value)} required/><button className='border px-3 py-2'>Send reset link</button><div className='ml-2'><button type='button' onClick={()=>setM('login')}>Back</button></div></form>}</div>}
